normal$distr  <- 'normal'
student$distr <-  'student'
cauchy$distr  <- 'cauchy'
distrLength <- rbind(uniform, normal, student, cauchy)
ggplot(distrLength, aes(ratio_ess, fill = distr)) + geom_histogram(alpha = 0.5, aes(y = ..density..), bins = 50)+ scale_color_brewer(palette = "Dark2") + scale_fill_brewer(palette = "Dark2")
# Leave-one-out cross-validation over the models with different priors
loo.uniform    <- loo(model.full.uniform, cores = 2)
# Leave-one-out cross-validation over the models with different priors
loo.uniform    <- loo(model.full.uniform, cores = 4)
loo.normal    <- loo(model.full.normal, cores = 4)
loo.student <- loo(model.full.student, cores = 4)
loo.cauchy   <- loo(model.full.cauchy, cores = 4)
compar_models_prior <- loo_compare(loo.uniform, loo.normal, loo.student, loo.cauchy)
compar_models_prior
data_4_fit <- list(N = nrow(datSet),
p = 6,
age = as.numeric(datSet$Age),
died = as.numeric(datSet$Died),
sex = as.numeric(datSet$Sex),
job = as.numeric(datSet$Occupation),
urban = as.numeric(datSet$Urban),
edu = as.numeric(datSet$Education))
fileName <- "./stan_model_with_prior.stan"
stan_code <- readChar(fileName, file.info(fileName)$size)
cat(stan_code)
# Run Stan
fitStan <- stan(model_code = stan_code,
data = data_4_fit,
chains = 5,
iter = 2000,
warmup = 800,
thin = 10,
refresh = 0,
seed = 12345,
control = list(adapt_delta = 0.95))
print(fitStan, pars = c('beta', 'sigma'))
# Posterior predictive checking
y_tilde <- posterior_predict(model.full.cauchy, datSetCluster, draws = 100)
print(dim(y_tilde))
View(y_tilde)
View(y_tilde)
View(datSetCluster)
View(datSetCluster)
# Posterior predictive checking
y_tilde <- posterior_predict(model.full.cauchy, newdata, draws = 100)
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
head(post_data)
y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
(post_data)
y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urban <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
(post_data)
y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
View(datSet)
View(datSet)
View(datSet)
View(datSet)
datFile <- "suicide attempt data_2.csv"
datCsv <- read.csv(datFile, stringsAsFactors=FALSE)
datSet <- as.data.frame(datCsv)
datSet$Season <- datSet$Month
datSet$Month = NULL
## Remove unknown labels
indexUnkn_1 <- which(datSet$Education == 'unknown')
indexUnkn_2 <- which(datSet$Urban == 'unknown')
indexUnkn_3 <- which(datSet$Occupation == 'others/unknown')
datSet <- datSet[-c(indexUnkn_1, indexUnkn_2,indexUnkn_3),]
# Hospitalised
indexHosp   <- which(datSet$Hospitalised == 'yes')
indexNoHosp <- which(datSet$Hospitalised == 'no')
datSet$Hospitalised[indexHosp]   <- 1    # 1 --> yes
datSet$Hospitalised[indexNoHosp] <- 0    # 0 --> no
# Died
indexDied   <- which(datSet$Died == 'yes')
indexNoDied <- which(datSet$Died == 'no')
datSet$Died[indexDied]   <- 1    # 1 --> yes
datSet$Died[indexNoDied] <- 0    # 0 --> no
# Urban
indexUrban   <- which(datSet$Urban == 'yes')
indexNoUrban <- which(datSet$Urban == 'no')
datSet$Urban[indexUrban]   <- 0    # 0 --> yes
datSet$Urban[indexNoUrban] <- 1    # 1 --> no
#Year
indexYear2009 <- which(datSet$Year == 2009)
indexYear2010 <- which(datSet$Year == 2010)
indexYear2011 <- which(datSet$Year == 2011)
datSet$Year[indexYear2009] <- 1    # 1 --> 2009
datSet$Year[indexYear2010] <- 2    # 2 --> 2010
datSet$Year[indexYear2011] <- 3    # 3 --> 2011
# Sex
indexMale   <- which(datSet$Sex == 'male')
indexFemale <- which(datSet$Sex == 'female')
datSet$Sex[indexMale]   <- 1    # 1 --> male
datSet$Sex[indexFemale] <- 0    # 0 --> female
# Education
indexEduZero  <- which(datSet$Education == 'iliterate')
indexEduOne   <- which(datSet$Education == 'primary')
indexEduTwo   <- which(datSet$Education == 'Secondary')
indexEduThree <- which(datSet$Education == 'Tertiary')
datSet$Education[indexEduZero]   <- 0   # 0 --> iliterate
datSet$Education[indexEduOne]    <- 1   # 1 --> primary
datSet$Education[indexEduTwo]    <- 2   # 2 --> Secondary
datSet$Education[indexEduThree]  <- 3   # 3 --> Tertiary
# Occupation
indexUnEmpl <- which(datSet$Occupation == 'unemployed')
indexFarm   <- which(datSet$Occupation == 'farming')
indexProf   <- which(datSet$Occupation == 'business/service' | datSet$Occupation == 'professional' | datSet$Occupation == 'worker')
datSet$Occupation[indexUnEmpl]                            <- 0   # 0 --> unemployed
datSet$Occupation[indexFarm]                              <- 1   # 1 --> farming
datSet$Occupation[indexProf]                              <- 2   # 2 --> professional and worker
datSet$Occupation[-c(indexUnEmpl, indexFarm, indexProf)]  <- 3   # 3 --> others
# Method
indexPesticide <- which(datSet$method == 'Pesticide')
indexPoison    <- which(datSet$method == 'Other poison')
indexHanging   <- which(datSet$method == 'hanging')
indexOthers    <- which(datSet$method != 'Pesticide' &
datSet$method != 'Other poison' &
datSet$method != 'hanging')
datSet$method[indexPesticide] <- 1 # 1 --> Pesticide
datSet$method[indexPoison]    <- 2 # 2 --> Other poison
datSet$method[indexHanging]   <- 3 # 3 --> hanging
datSet$method[indexOthers]    <- 4 # 4 --> All others
# Season
indexSpring <- which(datSet$Season >= 3 & datSet$Season <= 5)
indexSummer <- which(datSet$Season >= 6 & datSet$Season <= 8)
indexAutumn <- which(datSet$Season >= 9 & datSet$Season <= 11)
indexWinter <- which(datSet$Season == 12 | datSet$Season <= 2)
datSet$Season[indexSpring] <- 1  # 1 --> Spring
datSet$Season[indexSummer] <- 2  # 2 --> Summer
datSet$Season[indexAutumn] <- 3  # 3 --> Autumn
datSet$Season[indexWinter] <- 4  # 4 --> Winter
datSetCluster <- datSet
# Age
indexAgeOne   <- which(datSet$Age <= 34)
indexAgeTwo   <- which(datSet$Age >= 35 & datSet$Age <= 49)
indexAgeThree <- which(datSet$Age >= 50 & datSet$Age <= 64)
indexAgeFour  <- which(datSet$Age >= 65)
datSetCluster$Age[indexAgeOne]   <- 1   # 1 --> <34
datSetCluster$Age[indexAgeTwo]   <- 2   # 2 --> 35-49
datSetCluster$Age[indexAgeThree] <- 3   # 3 --> 50-64
datSetCluster$Age[indexAgeFour]  <- 4   # 4 --> >65
View(datSetCluster)
View(datSetCluster)
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urban <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
(post_data)
y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
Urban <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
(post_data)
y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
datFile <- "suicide attempt data_2.csv"
datCsv <- read.csv(datFile, stringsAsFactors=FALSE)
datSet <- as.data.frame(datCsv)
datSet$Season <- datSet$Month
datSet$Month = NULL
## Remove unknown labels
indexUnkn_1 <- which(datSet$Education == 'unknown')
indexUnkn_2 <- which(datSet$Urban == 'unknown')
indexUnkn_3 <- which(datSet$Occupation == 'others/unknown')
datSet <- datSet[-c(indexUnkn_1, indexUnkn_2,indexUnkn_3),]
# Hospitalised
indexHosp   <- which(datSet$Hospitalised == 'yes')
indexNoHosp <- which(datSet$Hospitalised == 'no')
datSet$Hospitalised[indexHosp]   <- 1    # 1 --> yes
datSet$Hospitalised[indexNoHosp] <- 0    # 0 --> no
# Died
indexDied   <- which(datSet$Died == 'yes')
indexNoDied <- which(datSet$Died == 'no')
datSet$Died[indexDied]   <- 1    # 1 --> yes
datSet$Died[indexNoDied] <- 0    # 0 --> no
# Urban
indexUrban   <- which(datSet$Urban == 'yes')
indexNoUrban <- which(datSet$Urban == 'no')
datSet$Urban[indexUrban]   <- 1    # 1 --> yes
datSet$Urban[indexNoUrban] <- 0    # 0 --> no
#Year
indexYear2009 <- which(datSet$Year == 2009)
indexYear2010 <- which(datSet$Year == 2010)
indexYear2011 <- which(datSet$Year == 2011)
datSet$Year[indexYear2009] <- 1    # 1 --> 2009
datSet$Year[indexYear2010] <- 2    # 2 --> 2010
datSet$Year[indexYear2011] <- 3    # 3 --> 2011
# Sex
indexMale   <- which(datSet$Sex == 'male')
indexFemale <- which(datSet$Sex == 'female')
datSet$Sex[indexMale]   <- 1    # 1 --> male
datSet$Sex[indexFemale] <- 0    # 0 --> female
# Education
indexEduZero  <- which(datSet$Education == 'iliterate')
indexEduOne   <- which(datSet$Education == 'primary')
indexEduTwo   <- which(datSet$Education == 'Secondary')
indexEduThree <- which(datSet$Education == 'Tertiary')
datSet$Education[indexEduZero]   <- 0   # 0 --> iliterate
datSet$Education[indexEduOne]    <- 1   # 1 --> primary
datSet$Education[indexEduTwo]    <- 2   # 2 --> Secondary
datSet$Education[indexEduThree]  <- 3   # 3 --> Tertiary
# Occupation
indexUnEmpl <- which(datSet$Occupation == 'unemployed')
indexFarm   <- which(datSet$Occupation == 'farming')
indexProf   <- which(datSet$Occupation == 'business/service' | datSet$Occupation == 'professional' | datSet$Occupation == 'worker')
datSet$Occupation[indexUnEmpl]                            <- 0   # 0 --> unemployed
datSet$Occupation[indexFarm]                              <- 1   # 1 --> farming
datSet$Occupation[indexProf]                              <- 2   # 2 --> professional and worker
datSet$Occupation[-c(indexUnEmpl, indexFarm, indexProf)]  <- 3   # 3 --> others
# Method
indexPesticide <- which(datSet$method == 'Pesticide')
indexPoison    <- which(datSet$method == 'Other poison')
indexHanging   <- which(datSet$method == 'hanging')
indexOthers    <- which(datSet$method != 'Pesticide' &
datSet$method != 'Other poison' &
datSet$method != 'hanging')
datSet$method[indexPesticide] <- 1 # 1 --> Pesticide
datSet$method[indexPoison]    <- 2 # 2 --> Other poison
datSet$method[indexHanging]   <- 3 # 3 --> hanging
datSet$method[indexOthers]    <- 4 # 4 --> All others
# Season
indexSpring <- which(datSet$Season >= 3 & datSet$Season <= 5)
indexSummer <- which(datSet$Season >= 6 & datSet$Season <= 8)
indexAutumn <- which(datSet$Season >= 9 & datSet$Season <= 11)
indexWinter <- which(datSet$Season == 12 | datSet$Season <= 2)
datSet$Season[indexSpring] <- 1  # 1 --> Spring
datSet$Season[indexSummer] <- 2  # 2 --> Summer
datSet$Season[indexAutumn] <- 3  # 3 --> Autumn
datSet$Season[indexWinter] <- 4  # 4 --> Winter
datSetCluster <- datSet
# Age
indexAgeOne   <- which(datSet$Age <= 34)
indexAgeTwo   <- which(datSet$Age >= 35 & datSet$Age <= 49)
indexAgeThree <- which(datSet$Age >= 50 & datSet$Age <= 64)
indexAgeFour  <- which(datSet$Age >= 65)
datSetCluster$Age[indexAgeOne]   <- 1   # 1 --> <34
datSetCluster$Age[indexAgeTwo]   <- 2   # 2 --> 35-49
datSetCluster$Age[indexAgeThree] <- 3   # 3 --> 50-64
datSetCluster$Age[indexAgeFour]  <- 4   # 4 --> >65
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
hosp
# died <- as.numeric(datSetCluster$Died)
# urba <- as.numeric(datSetCluster$Urban)
# year <- as.numeric(datSetCluster$Year)
# sex  <- as.numeric(datSetCluster$Sex)
# age  <- as.numeric(datSetCluster$Age)
# edu  <- as.numeric(datSetCluster$Education)
# occu <- as.numeric(datSetCluster$Occupation)
# meth <- as.numeric(datSetCluster$method)
# seas <- as.numeric(datSetCluster$Season)
#
# post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
#
# (post_data)
#
# y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
# print(dim(y_tilde))
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
#
# post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
#
# (post_data)
#
# y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
# print(dim(y_tilde))
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
post_data
#
# y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
# print(dim(y_tilde))
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
post_data
y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
model.full.cauchy <- stan_glm(
died ~ urba + year + sex + age + edu + occu + meth + seas,
data = post_data,
family = binomial(link = "logit"),
prior = cauchy(0,4),
prior_intercept = NULL,
QR = TRUE,
chains = 5,
iter = 2000,
warmup = 1000
)
y_tilde <- posterior_predict(model.full.cauchy, post_data, draws = 100)
print(dim(y_tilde))
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
model.full.cauchy <- stan_glm(
died ~ urba + year + sex + age + edu + occu + meth + seas,
data = post_data,
family = binomial(link = "logit"),
prior = cauchy(0,4),
prior_intercept = NULL,
QR = TRUE,
chains = 5,
iter = 2000,
warmup = 1000
)
new_post_data <- data.frame(hosp = factor(hosp), died, urba = factor(urba), year = factor(year), sex = factor(sex), age = factor(age),
edu = factor(edu), occu = factor(occu), meth = factor(meth), seas = factor(seas))
y_tilde <- posterior_predict(model.full.cauchy, new_post_data, draws = 100)
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
model.full.cauchy <- stan_glm(
died ~ urba + year + sex + age + edu + occu + meth + seas,
data = post_data,
family = binomial(link = "logit"),
prior = cauchy(0,4),
prior_intercept = NULL,
QR = TRUE,
chains = 5,
iter = 2000,
warmup = 1000
)
new_post_data <- data.frame(hosp, urba, year, sex, age, edu, occu, meth, seas)
y_tilde <- posterior_predict(model.full.cauchy, new_post_data, draws = 100)
print(dim(y_tilde))
View(y_tilde)
View(y_tilde)
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
model.full.cauchy <- stan_glm(
died ~ urba + year + sex + age + edu + occu + meth + seas,
data = post_data,
family = binomial(link = "logit"),
prior = cauchy(0,4),
prior_intercept = NULL,
QR = TRUE,
chains = 5,
iter = 2000,
warmup = 1000
)
new_post_data <- data.frame(hosp, urba, year, sex, age, edu, occu, meth, seas)
y_tilde <- posterior_predict(model.full.cauchy, new_post_data[1], draws = 100)
print(dim(y_tilde))
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
model.full.cauchy <- stan_glm(
died ~ urba + year + sex + age + edu + occu + meth + seas,
data = post_data,
family = binomial(link = "logit"),
prior = cauchy(0,4),
prior_intercept = NULL,
QR = TRUE,
chains = 5,
iter = 2000,
warmup = 1000
)
new_post_data <- data.frame(hosp, urba, year, sex, age, edu, occu, meth, seas)
y_tilde <- posterior_predict(model.full.cauchy, new_post_data[1], draws = 1)
print(dim(y_tilde))
# Posterior predictive checking
hosp <- as.numeric(datSetCluster$Hospitalised)
died <- as.numeric(datSetCluster$Died)
urba <- as.numeric(datSetCluster$Urban)
year <- as.numeric(datSetCluster$Year)
sex  <- as.numeric(datSetCluster$Sex)
age  <- as.numeric(datSetCluster$Age)
edu  <- as.numeric(datSetCluster$Education)
occu <- as.numeric(datSetCluster$Occupation)
meth <- as.numeric(datSetCluster$method)
seas <- as.numeric(datSetCluster$Season)
post_data <- data.frame(hosp, died, urba, year, sex, age, edu, occu, meth, seas)
model.full.cauchy <- stan_glm(
died ~ urba + year + sex + age + edu + occu + meth + seas,
data = post_data,
family = binomial(link = "logit"),
prior = cauchy(0,4),
prior_intercept = NULL,
QR = TRUE,
chains = 5,
iter = 2000,
warmup = 1000
)
new_post_data <- data.frame(hosp, urba, year, sex, age, edu, occu, meth, seas)
y_tilde <- posterior_predict(model.full.cauchy, new_post_data, draws = [500,1])
