<<<<<<< HEAD
install.packages("epitools")
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
=======
# Method
indexPesticide <- which(data$method == 'Pesticide')
indexPoison    <- which(data$method == 'Other poison')
indexHanging    <- which(data$method == 'hanging')
indexOthers    <- which(data$method != 'Pesticide' &
data$method != 'Other poison' &
data$method != 'hanging')
mydata$method[indexPesticide] <- 1 # 1 --> Pesticide
mydata$method[indexPoison]    <- 2 # 2 --> Other poison
mydata$method[indexHanging]   <- 3 # 3 --> hanging
mydata$method[indexOthers]    <- 4 # 4 --> All others
str(mydata)
## Remove unknown labels
indexUnkwn1 <- which(mydata$Education == 'unknown')
indexUnknw2 <- which(mydata$Urban == 'unknown')
mydata <- mydata[-indexUnknw1,]
## Remove unknown labels
indexUnknw1 <- which(mydata$Education == 'unknown')
indexUnknw2 <- which(mydata$Urban == 'unknown')
mydata <- mydata[-indexUnknw1,]
mydata <- mydata[-indexUnknw2,]
View(mydata)
View(mydata)
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
library(magrittr)
#library(XLConnect)
library(rstan)
>>>>>>> d76d7944a71c883de7104a62d2b52607a04782e5
library(nnet)
library(epitools)
library(aaltobda)
library(tinytex)
library(MASS)
library(mvtnorm)
library(ggplot2)
library(rstan)
library(devtools)
library(brms)
library(loo)
library(KernSmooth)
<<<<<<< HEAD
data <- read.csv("C:\\Users\\nicol\\Documents\\_study\\EIT\\second_year\\_bayesian_data_analysis\\project\\suicide attempt data_2.csv", stringsAsFactors=FALSE)
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
=======
data <- read.csv("./suicide attempt data_2.csv", stringsAsFactors=FALSE)
mydata <- data
mydata$Season <- data$Month
mydata$Month = NULL
# Hospitalised
indexHosp   <- which(data$Hospitalised == 'yes')
indexNoHosp <- which(data$Hospitalised == 'no')
mydata$Hospitalised[indexHosp]   <- 1    # 1 --> yes
mydata$Hospitalised[indexNoHosp] <- 0    # 0 --> no
# Died
indexDied   <- which(data$Died == 'yes')
indexNoDied <- which(data$Died == 'no')
mydata$Died[indexDied]   <- 1    # 1 --> yes
mydata$Died[indexNoDied] <- 0    # 0 --> no
# Urban
indexUrban   <- which(data$Urban == 'yes')
indexNoUrban <- which(data$Urban == 'no')
mydata$Urban[indexUrban]   <- 1    # 1 --> yes
mydata$Urban[indexNoUrban] <- 0    # 0 --> no
# Season
indexSpring <- which(data$Month >= 3 & data$Month <= 5)
indexSummer <- which(data$Month >= 6 & data$Month <= 8)
indexAutumn <- which(data$Month >= 9 & data$Month <= 11)
indexWinter <- which(data$Month == 12 | data$Month <= 2)
mydata$Season[indexSpring] <- 1  # 1 --> Spring
mydata$Season[indexSummer] <- 2  # 2 --> Summer
mydata$Season[indexAutumn] <- 3  # 3 --> Autumn
mydata$Season[indexWinter] <- 4  # 4 --> Winter
# Sex
indexMale   <- which(data$Sex == 'male')
indexFemale <- which(data$Sex == 'female')
mydata$Sex[indexMale]   <- 1    # 1 --> male
mydata$Sex[indexFemale] <- 0    # 0 --> female
# Age
indexAgeOne   <- which(data$Age <= 34)
indexAgeTwo   <- which(data$Age >= 35 & data$Age <= 49)
indexAgeThree <- which(data$Age >= 50 & data$Age <= 64)
indexAgeFour  <- which(data$Age >= 65)
mydata$Age[indexAgeOne]   <- 1   # 1 --> <34
mydata$Age[indexAgeTwo]   <- 2   # 2 --> 35-49
mydata$Age[indexAgeThree] <- 3   # 3 --> 50-64
mydata$Age[indexAgeFour]  <- 4   # 4 --> >65
# Education
indexEduZero  <- which(data$Education == 'iliterate')
indexEduOne   <- which(data$Education == 'primary')
indexEduTwo   <- which(data$Education == 'Secondary')
indexEduThree <- which(data$Education == 'Tertiary')
mydata$Education[indexEduZero]   <- 0   # 0 --> iliterate
mydata$Education[indexEduOne]   <- 1   # 1 --> primary
mydata$Education[indexEduTwo] <- 2   # 2 --> Secondary
mydata$Education[indexEduThree]  <- 3   # 3 --> Tertiary
# Occupation
indexFarm   <- which(data$Occupation == 'farming')
indexNoFarm <- which(data$Occupation != 'farming')
mydata$Occupation[indexFarm]   <- 1    # 1 --> farming
mydata$Occupation[indexNoFarm] <- 0    # 0 --> non farming
# Method
indexPesticide <- which(data$method == 'Pesticide')
indexPoison    <- which(data$method == 'Other poison')
indexHanging    <- which(data$method == 'hanging')
indexOthers    <- which(data$method != 'Pesticide' &
data$method != 'Other poison' &
data$method != 'hanging')
mydata$method[indexPesticide] <- 1 # 1 --> Pesticide
mydata$method[indexPoison]    <- 2 # 2 --> Other poison
mydata$method[indexHanging]   <- 3 # 3 --> hanging
mydata$method[indexOthers]    <- 4 # 4 --> All others
str(mydata)
## Remove unknown labels
indexUnknw1 <- which(mydata$Education == 'unknown')
indexUnknw2 <- which(mydata$Urban == 'unknown')
mydata <- mydata[-indexUnknw1,]
mydata <- mydata[-indexUnknw2,]
mydata <- mydata[-indexUnknw2,]
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
library(magrittr)
#library(XLConnect)
library(rstan)
>>>>>>> d76d7944a71c883de7104a62d2b52607a04782e5
library(nnet)
library(epitools)
library(aaltobda)
library(tinytex)
library(MASS)
library(mvtnorm)
library(ggplot2)
library(rstan)
library(devtools)
library(brms)
library(loo)
library(KernSmooth)
<<<<<<< HEAD
data <- read.csv("suicide attempt data_2.csv", stringsAsFactors=FALSE)
=======
data <- read.csv("./suicide attempt data_2.csv", stringsAsFactors=FALSE)
mydata <- data
mydata$Season <- data$Month
mydata$Month = NULL
# Hospitalised
indexHosp   <- which(data$Hospitalised == 'yes')
indexNoHosp <- which(data$Hospitalised == 'no')
mydata$Hospitalised[indexHosp]   <- 1    # 1 --> yes
mydata$Hospitalised[indexNoHosp] <- 0    # 0 --> no
# Died
indexDied   <- which(data$Died == 'yes')
indexNoDied <- which(data$Died == 'no')
mydata$Died[indexDied]   <- 1    # 1 --> yes
mydata$Died[indexNoDied] <- 0    # 0 --> no
# Urban
indexUrban   <- which(data$Urban == 'yes')
indexNoUrban <- which(data$Urban == 'no')
mydata$Urban[indexUrban]   <- 1    # 1 --> yes
mydata$Urban[indexNoUrban] <- 0    # 0 --> no
# Season
indexSpring <- which(data$Month >= 3 & data$Month <= 5)
indexSummer <- which(data$Month >= 6 & data$Month <= 8)
indexAutumn <- which(data$Month >= 9 & data$Month <= 11)
indexWinter <- which(data$Month == 12 | data$Month <= 2)
mydata$Season[indexSpring] <- 1  # 1 --> Spring
mydata$Season[indexSummer] <- 2  # 2 --> Summer
mydata$Season[indexAutumn] <- 3  # 3 --> Autumn
mydata$Season[indexWinter] <- 4  # 4 --> Winter
# Sex
indexMale   <- which(data$Sex == 'male')
indexFemale <- which(data$Sex == 'female')
mydata$Sex[indexMale]   <- 1    # 1 --> male
mydata$Sex[indexFemale] <- 0    # 0 --> female
# Age
indexAgeOne   <- which(data$Age <= 34)
indexAgeTwo   <- which(data$Age >= 35 & data$Age <= 49)
indexAgeThree <- which(data$Age >= 50 & data$Age <= 64)
indexAgeFour  <- which(data$Age >= 65)
mydata$Age[indexAgeOne]   <- 1   # 1 --> <34
mydata$Age[indexAgeTwo]   <- 2   # 2 --> 35-49
mydata$Age[indexAgeThree] <- 3   # 3 --> 50-64
mydata$Age[indexAgeFour]  <- 4   # 4 --> >65
# Education
indexEduZero  <- which(data$Education == 'iliterate')
indexEduOne   <- which(data$Education == 'primary')
indexEduTwo   <- which(data$Education == 'Secondary')
indexEduThree <- which(data$Education == 'Tertiary')
mydata$Education[indexEduZero]   <- 0   # 0 --> iliterate
mydata$Education[indexEduOne]   <- 1   # 1 --> primary
mydata$Education[indexEduTwo] <- 2   # 2 --> Secondary
mydata$Education[indexEduThree]  <- 3   # 3 --> Tertiary
# Occupation
indexFarm   <- which(data$Occupation == 'farming')
indexNoFarm <- which(data$Occupation != 'farming')
mydata$Occupation[indexFarm]   <- 1    # 1 --> farming
mydata$Occupation[indexNoFarm] <- 0    # 0 --> non farming
# Method
indexPesticide <- which(data$method == 'Pesticide')
indexPoison    <- which(data$method == 'Other poison')
indexHanging    <- which(data$method == 'hanging')
indexOthers    <- which(data$method != 'Pesticide' &
data$method != 'Other poison' &
data$method != 'hanging')
mydata$method[indexPesticide] <- 1 # 1 --> Pesticide
mydata$method[indexPoison]    <- 2 # 2 --> Other poison
mydata$method[indexHanging]   <- 3 # 3 --> hanging
mydata$method[indexOthers]    <- 4 # 4 --> All others
str(mydata)
>>>>>>> d76d7944a71c883de7104a62d2b52607a04782e5
rural_men   <- subset(data, data$Sex=="male" & data$Urban=="no")
rural_women <- subset(data, data$Sex=="female" & data$Urban=="no")
urban_men   <- subset(data, data$Sex=="male" & data$Urban=="yes")
urban_women <- subset(data, data$Sex=="female" & data$Urban=="yes")
<<<<<<< HEAD
mydata <- data
str(mydata)
mydata$Dead <- factor(mydata$Died)
mydata$out <- relevel(mydata$Dead, ref="no")
mymodel <- multinom(out~Hospitalised+Urban+Year+Month+Sex+Age+Education+Occupation+method, data = mydata)
summary(mymodel)
View(data)
View(mydata)
View(mydata)
index_for_spring <- which(data$Month >= 3 && data$Month <= 5)
index_for_spring <- which(data$Month >= 3 && data$Month <= 5)
index_for_spring
index_for_spring <- which(data$Month >= 3 & data$Month <= 5)
index_for_spring <- which(data$Month >= 3 & data$Month <= 5)
index_for_spring
indexOthers <- which(data$method != 'Pesticide' &
data$method != 'Other poison' &
data$method != 'Hanging')
mydata$method[indexOthers] <- 'All others'
View(mydata)
indexOthers <- which(data$method != 'Pesticide' &
data$method != 'Other poison' &
data$method != 'hanging')
mydata$method[indexOthers] <- 'All others'
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
library(magrittr)
library(XLConnect)
install.packages("XLConnect")
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
library(magrittr)
library(XLConnect)
install.packages("XLConnectJars")
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
library(magrittr)
library(XLConnect)
install.packages("XLConnect")
install.packages(c("backports", "callr", "caTools", "covr", "curl", "digest", "DT", "future", "htmltools", "htmlwidgets", "httpuv", "igraph", "knitr", "later", "pkgbuild", "promises", "purrr", "R6", "Rcpp", "RcppEigen", "rlang", "rmarkdown", "roxygen2", "scales", "shiny", "testthat", "xfun"))
install.packages(c("backports", "callr", "caTools", "covr", "curl", "digest", "DT", "future", "htmltools", "htmlwidgets", "httpuv", "igraph", "knitr", "later", "pkgbuild", "promises", "purrr", "R6", "Rcpp", "RcppEigen", "rlang", "rmarkdown", "roxygen2", "scales", "shiny", "testthat", "xfun"))
install.packages(c("backports", "callr", "caTools", "covr", "curl", "digest", "DT", "future", "htmltools", "htmlwidgets", "httpuv", "igraph", "knitr", "later", "pkgbuild", "promises", "purrr", "R6", "Rcpp", "RcppEigen", "rlang", "rmarkdown", "roxygen2", "scales", "shiny", "testthat", "xfun"))
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
library(magrittr)
library(XLConnect)
=======
str(data)
## Remove unknown labels
indexUnknw1 <- which(mydata$Education == 'unknown')
indexUnkn <- which(mydata$Urban == 'unknown')
mydata <- mydata[-indexUnknw1,]
mydata <- mydata[-indexUnknw2,]
## Remove unknown labels
indexUnknw1 <- which(mydata$Education == 'unknown')
indexUnkn <- which(mydata$Urban == 'unknown')
mydata <- mydata[-indexUnknw1,]
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
library(magrittr)
#library(XLConnect)
library(rstan)
library(nnet)
library(epitools)
library(aaltobda)
library(tinytex)
library(MASS)
library(mvtnorm)
library(ggplot2)
library(rstan)
library(devtools)
library(brms)
library(loo)
library(KernSmooth)
data <- read.csv("./suicide attempt data_2.csv", stringsAsFactors=FALSE)
mydata <- data
mydata$Season <- data$Month
mydata$Month = NULL
# Hospitalised
indexHosp   <- which(data$Hospitalised == 'yes')
indexNoHosp <- which(data$Hospitalised == 'no')
mydata$Hospitalised[indexHosp]   <- 1    # 1 --> yes
mydata$Hospitalised[indexNoHosp] <- 0    # 0 --> no
# Died
indexDied   <- which(data$Died == 'yes')
indexNoDied <- which(data$Died == 'no')
mydata$Died[indexDied]   <- 1    # 1 --> yes
mydata$Died[indexNoDied] <- 0    # 0 --> no
# Urban
indexUrban   <- which(data$Urban == 'yes')
indexNoUrban <- which(data$Urban == 'no')
mydata$Urban[indexUrban]   <- 1    # 1 --> yes
mydata$Urban[indexNoUrban] <- 0    # 0 --> no
# Season
indexSpring <- which(data$Month >= 3 & data$Month <= 5)
indexSummer <- which(data$Month >= 6 & data$Month <= 8)
indexAutumn <- which(data$Month >= 9 & data$Month <= 11)
indexWinter <- which(data$Month == 12 | data$Month <= 2)
mydata$Season[indexSpring] <- 1  # 1 --> Spring
mydata$Season[indexSummer] <- 2  # 2 --> Summer
mydata$Season[indexAutumn] <- 3  # 3 --> Autumn
mydata$Season[indexWinter] <- 4  # 4 --> Winter
# Sex
indexMale   <- which(data$Sex == 'male')
indexFemale <- which(data$Sex == 'female')
mydata$Sex[indexMale]   <- 1    # 1 --> male
mydata$Sex[indexFemale] <- 0    # 0 --> female
# Age
indexAgeOne   <- which(data$Age <= 34)
indexAgeTwo   <- which(data$Age >= 35 & data$Age <= 49)
indexAgeThree <- which(data$Age >= 50 & data$Age <= 64)
indexAgeFour  <- which(data$Age >= 65)
mydata$Age[indexAgeOne]   <- 1   # 1 --> <34
mydata$Age[indexAgeTwo]   <- 2   # 2 --> 35-49
mydata$Age[indexAgeThree] <- 3   # 3 --> 50-64
mydata$Age[indexAgeFour]  <- 4   # 4 --> >65
# Education
indexEduZero  <- which(data$Education == 'iliterate')
indexEduOne   <- which(data$Education == 'primary')
indexEduTwo   <- which(data$Education == 'Secondary')
indexEduThree <- which(data$Education == 'Tertiary')
mydata$Education[indexEduZero]   <- 0   # 0 --> iliterate
mydata$Education[indexEduOne]   <- 1   # 1 --> primary
mydata$Education[indexEduTwo] <- 2   # 2 --> Secondary
mydata$Education[indexEduThree]  <- 3   # 3 --> Tertiary
# Occupation
indexFarm   <- which(data$Occupation == 'farming')
indexNoFarm <- which(data$Occupation != 'farming')
mydata$Occupation[indexFarm]   <- 1    # 1 --> farming
mydata$Occupation[indexNoFarm] <- 0    # 0 --> non farming
# Method
indexPesticide <- which(data$method == 'Pesticide')
indexPoison    <- which(data$method == 'Other poison')
indexHanging    <- which(data$method == 'hanging')
indexOthers    <- which(data$method != 'Pesticide' &
data$method != 'Other poison' &
data$method != 'hanging')
mydata$method[indexPesticide] <- 1 # 1 --> Pesticide
mydata$method[indexPoison]    <- 2 # 2 --> Other poison
mydata$method[indexHanging]   <- 3 # 3 --> hanging
mydata$method[indexOthers]    <- 4 # 4 --> All others
str(mydata)
## Remove unknown labels
indexUnknw1 <- which(mydata$Education == 'unknown')
indexUnkn <- which(mydata$Urban == 'unknown')
mydata <- mydata[-indexUnknw1,]
mydata <- mydata[-indexUnkn,]
View(mydata)
View(mydata)
View(mydata)
View(mydata)
>>>>>>> d76d7944a71c883de7104a62d2b52607a04782e5
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
library(magrittr)
#library(XLConnect)
library(rstan)
library(nnet)
library(epitools)
library(aaltobda)
library(tinytex)
library(MASS)
library(mvtnorm)
library(ggplot2)
library(rstan)
library(devtools)
library(brms)
library(loo)
library(KernSmooth)
<<<<<<< HEAD
data <- read.csv("suicide attempt data_2.csv", stringsAsFactors=FALSE)
mydata <- data
mydata$Season <- data$Month
mydata$Month = NULL
=======
data <- read.csv("./suicide attempt data_2.csv", stringsAsFactors=FALSE)
mydata <- data
mydata$Season <- data$Month
mydata$Month = NULL
# Hospitalised
indexHosp   <- which(data$Hospitalised == 'yes')
indexNoHosp <- which(data$Hospitalised == 'no')
mydata$Hospitalised[indexHosp]   <- 1    # 1 --> yes
mydata$Hospitalised[indexNoHosp] <- 0    # 0 --> no
# Died
indexDied   <- which(data$Died == 'yes')
indexNoDied <- which(data$Died == 'no')
mydata$Died[indexDied]   <- 1    # 1 --> yes
mydata$Died[indexNoDied] <- 0    # 0 --> no
# Urban
indexUrban   <- which(data$Urban == 'yes')
indexNoUrban <- which(data$Urban == 'no')
mydata$Urban[indexUrban]   <- 1    # 1 --> yes
mydata$Urban[indexNoUrban] <- 0    # 0 --> no
# Season
>>>>>>> d76d7944a71c883de7104a62d2b52607a04782e5
indexSpring <- which(data$Month >= 3 & data$Month <= 5)
indexSummer <- which(data$Month >= 6 & data$Month <= 8)
indexAutumn <- which(data$Month >= 9 & data$Month <= 11)
indexWinter <- which(data$Month == 12 | data$Month <= 2)
<<<<<<< HEAD
mydata$Season[indexSpring] <- 'Spring'
mydata$Season[indexSummer] <- 'Summer'
mydata$Season[indexAutumn] <- 'Autumn'
mydata$Season[indexWinter] <- 'Winter'
=======
mydata$Season[indexSpring] <- 1  # 1 --> Spring
mydata$Season[indexSummer] <- 2  # 2 --> Summer
mydata$Season[indexAutumn] <- 3  # 3 --> Autumn
mydata$Season[indexWinter] <- 4  # 4 --> Winter
# Sex
indexMale   <- which(data$Sex == 'male')
indexFemale <- which(data$Sex == 'female')
mydata$Sex[indexMale]   <- 1    # 1 --> male
mydata$Sex[indexFemale] <- 0    # 0 --> female
# Age
>>>>>>> d76d7944a71c883de7104a62d2b52607a04782e5
indexAgeOne   <- which(data$Age <= 34)
indexAgeTwo   <- which(data$Age >= 35 & data$Age <= 49)
indexAgeThree <- which(data$Age >= 50 & data$Age <= 64)
indexAgeFour  <- which(data$Age >= 65)
<<<<<<< HEAD
mydata$Age[indexAgeOne]   <- '<34'
mydata$Age[indexAgeTwo]   <- '35-49'
mydata$Age[indexAgeThree] <- '50-64'
mydata$Age[indexAgeFour]  <- '>65'
indexFarm   <- which(data$Occupation == 'farming')
indexNoFarm <- which(data$Occupation != 'farming')
mydata$Occupation[indexFarm]   <- 'farming'
mydata$Occupation[indexNoFarm] <- 'others'
indexOthers <- which(data$method != 'Pesticide' &
data$method != 'Other poison' &
data$method != 'hanging')
mydata$method[indexOthers] <- 'All others'
=======
mydata$Age[indexAgeOne]   <- 1   # 1 --> <34
mydata$Age[indexAgeTwo]   <- 2   # 2 --> 35-49
mydata$Age[indexAgeThree] <- 3   # 3 --> 50-64
mydata$Age[indexAgeFour]  <- 4   # 4 --> >65
# Education
indexEduZero  <- which(data$Education == 'iliterate')
indexEduOne   <- which(data$Education == 'primary')
indexEduTwo   <- which(data$Education == 'Secondary')
indexEduThree <- which(data$Education == 'Tertiary')
mydata$Education[indexEduZero]   <- 0   # 0 --> iliterate
mydata$Education[indexEduOne]   <- 1   # 1 --> primary
mydata$Education[indexEduTwo] <- 2   # 2 --> Secondary
mydata$Education[indexEduThree]  <- 3   # 3 --> Tertiary
# Occupation
indexFarm   <- which(data$Occupation == 'farming')
indexNoFarm <- which(data$Occupation != 'farming')
mydata$Occupation[indexFarm]   <- 1    # 1 --> farming
mydata$Occupation[indexNoFarm] <- 0    # 0 --> non farming
# Method
indexPesticide <- which(data$method == 'Pesticide')
indexPoison    <- which(data$method == 'Other poison')
indexHanging    <- which(data$method == 'hanging')
indexOthers    <- which(data$method != 'Pesticide' &
data$method != 'Other poison' &
data$method != 'hanging')
mydata$method[indexPesticide] <- 1 # 1 --> Pesticide
mydata$method[indexPoison]    <- 2 # 2 --> Other poison
mydata$method[indexHanging]   <- 3 # 3 --> hanging
mydata$method[indexOthers]    <- 4 # 4 --> All others
>>>>>>> d76d7944a71c883de7104a62d2b52607a04782e5
str(mydata)
rural_men   <- subset(data, data$Sex=="male" & data$Urban=="no")
rural_women <- subset(data, data$Sex=="female" & data$Urban=="no")
urban_men   <- subset(data, data$Sex=="male" & data$Urban=="yes")
urban_women <- subset(data, data$Sex=="female" & data$Urban=="yes")
<<<<<<< HEAD
str(data)
dat <- list(N        = nrow(data),
p        = 10,
died     = data$Died,
urban    = data$Urban,
year     = data$Year,
month    = data$Month,
sex      = data$Sex,
age      = data$Age,
edu      = data$Education,
job      = data$Occupation,
method   = data$method)
View(mydata)
=======
## Remove unknown labels
indexUnknw1 <- which(mydata$Education == 'unknown')
mydata <- mydata[-indexUnknw1,]
indexUnkn <- which(mydata$Urban == 'unknown')
mydata <- mydata[-indexUnkn,]
>>>>>>> d76d7944a71c883de7104a62d2b52607a04782e5
# This chunk just sets echo = TRUE as default (i.e. print all code)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
library(magrittr)
#library(XLConnect)
library(rstan)
library(nnet)
library(epitools)
library(aaltobda)
library(tinytex)
library(MASS)
library(mvtnorm)
library(ggplot2)
library(rstan)
library(devtools)
library(brms)
library(loo)
library(KernSmooth)
data <- read.csv("./suicide attempt data_2.csv", stringsAsFactors=FALSE)
<<<<<<< HEAD
length(which(mydata$Education) == 'unknown')
length(which(mydata$Education == 'unknown'))
length(which(mydata$Urban == 'unknown'))
=======
mydata <- data
mydata$Season <- data$Month
mydata$Month = NULL
# Hospitalised
indexHosp   <- which(data$Hospitalised == 'yes')
indexNoHosp <- which(data$Hospitalised == 'no')
mydata$Hospitalised[indexHosp]   <- 1    # 1 --> yes
mydata$Hospitalised[indexNoHosp] <- 0    # 0 --> no
# Died
indexDied   <- which(data$Died == 'yes')
indexNoDied <- which(data$Died == 'no')
mydata$Died[indexDied]   <- 1    # 1 --> yes
mydata$Died[indexNoDied] <- 0    # 0 --> no
# Urban
indexUrban   <- which(data$Urban == 'yes')
indexNoUrban <- which(data$Urban == 'no')
mydata$Urban[indexUrban]   <- 1    # 1 --> yes
mydata$Urban[indexNoUrban] <- 0    # 0 --> no
# Season
indexSpring <- which(data$Month >= 3 & data$Month <= 5)
indexSummer <- which(data$Month >= 6 & data$Month <= 8)
indexAutumn <- which(data$Month >= 9 & data$Month <= 11)
indexWinter <- which(data$Month == 12 | data$Month <= 2)
mydata$Season[indexSpring] <- 1  # 1 --> Spring
mydata$Season[indexSummer] <- 2  # 2 --> Summer
mydata$Season[indexAutumn] <- 3  # 3 --> Autumn
mydata$Season[indexWinter] <- 4  # 4 --> Winter
# Sex
indexMale   <- which(data$Sex == 'male')
indexFemale <- which(data$Sex == 'female')
mydata$Sex[indexMale]   <- 1    # 1 --> male
mydata$Sex[indexFemale] <- 0    # 0 --> female
# Age
indexAgeOne   <- which(data$Age <= 34)
indexAgeTwo   <- which(data$Age >= 35 & data$Age <= 49)
indexAgeThree <- which(data$Age >= 50 & data$Age <= 64)
indexAgeFour  <- which(data$Age >= 65)
mydata$Age[indexAgeOne]   <- 1   # 1 --> <34
mydata$Age[indexAgeTwo]   <- 2   # 2 --> 35-49
mydata$Age[indexAgeThree] <- 3   # 3 --> 50-64
mydata$Age[indexAgeFour]  <- 4   # 4 --> >65
# Education
indexEduZero  <- which(data$Education == 'iliterate')
indexEduOne   <- which(data$Education == 'primary')
indexEduTwo   <- which(data$Education == 'Secondary')
indexEduThree <- which(data$Education == 'Tertiary')
mydata$Education[indexEduZero]   <- 0   # 0 --> iliterate
mydata$Education[indexEduOne]   <- 1   # 1 --> primary
mydata$Education[indexEduTwo] <- 2   # 2 --> Secondary
mydata$Education[indexEduThree]  <- 3   # 3 --> Tertiary
# Occupation
indexFarm   <- which(data$Occupation == 'farming')
indexNoFarm <- which(data$Occupation != 'farming')
mydata$Occupation[indexFarm]   <- 1    # 1 --> farming
mydata$Occupation[indexNoFarm] <- 0    # 0 --> non farming
# Method
indexPesticide <- which(data$method == 'Pesticide')
indexPoison    <- which(data$method == 'Other poison')
indexHanging    <- which(data$method == 'hanging')
indexOthers    <- which(data$method != 'Pesticide' &
data$method != 'Other poison' &
data$method != 'hanging')
mydata$method[indexPesticide] <- 1 # 1 --> Pesticide
mydata$method[indexPoison]    <- 2 # 2 --> Other poison
mydata$method[indexHanging]   <- 3 # 3 --> hanging
mydata$method[indexOthers]    <- 4 # 4 --> All others
str(mydata)
rural_men   <- subset(data, data$Sex=="male" & data$Urban=="no")
rural_women <- subset(data, data$Sex=="female" & data$Urban=="no")
urban_men   <- subset(data, data$Sex=="male" & data$Urban=="yes")
urban_women <- subset(data, data$Sex=="female" & data$Urban=="yes")
str(data)
## Create Stan data
dat <- list(N        = nrow(data),
p        = 10,
died     = data$Died,
urban    = data$Urban,
year     = data$Year,
month    = data$Season,
sex      = data$Sex,
age      = data$Age,
edu      = data$Education,
job      = data$Occupation,
method   = data$method)
## Load Stan file
fileName <- "./logistic_regression_model.stan"
stan_code <- readChar(fileName, file.info(fileName)$size)
cat(stan_code)
## Remove unknown labels
indexUnknw1 <- which(mydata$Education == 'unknown')
mydata <- mydata[-indexUnknw1,]
indexUnkn <- which(mydata$Urban == 'unknown')
mydata <- mydata[-indexUnkn,]
>>>>>>> d76d7944a71c883de7104a62d2b52607a04782e5
